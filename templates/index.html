<html xmlns="http://www.w3.org/1999/html">
<head>
<button class="next">next</button>
<button class="like">like</button>
<div id="url"></div>
</br>
</head>
<body>
<div id="embed">

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
<script>
    var token = $.cookie("token");
    var _id;
    if (!token){
        $.post("/authenticate", {}, function(response){
            $.cookie("token", response)});
            token = response;
    }
    function getter(){
        $.get("next?token=" + token, function(response){
            _id = response.article._id;
            $("#embed").html(response.article.content);
            $("#url").html('<a href="' + response.article.url +'">' + response.article.url+  '</a>')
        })
    }
    getter()
    $('.like').on("click", function(){
     var data = JSON.stringify({url: _id});
     console.log(data);
     $.ajax({type: 'POST',
             url: '/like?token=' + token,
             data: data,
             contentType: "application/json",
             dataType: "application/json",
             complete: function (response) {
                getter()
            }
            });

    });
    $(".next").on("click", function(){
        getter()
    });
</script>
</body>
</html>